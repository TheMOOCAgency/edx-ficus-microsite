## mako
<%page expression_filter="h"/>
<%!
  from django.core.urlresolvers import reverse
  from django.utils.translation import ugettext as _
  from branding.api import get_footer
  #maj TMA
  from openedx.core.djangoapps.site_configuration import helpers as configuration_helpers
%>
<% footer = get_footer(is_secure=is_secure) %>
<%namespace name='static' file='static_content.html'/>
<%
org = static.get_value('domain_prefix')
css = '/media/microsite/{}/auto/css/footer.css'.format(org)
cssoverride = '/media/microsite/assets_redesign/css/footer.css'.format(org_static)
%>


<!-- TMA Ficus Redesign -->
<link rel="stylesheet" type="text/css" href="${cssoverride}" />
<%
custom_color = str(configuration_helpers.get_value('primary_color'))
if course and configuration_helpers.get_value('TMA_CUSTOM_COURSE_COLOR'):
  if str(course.id) in configuration_helpers.get_value('TMA_CUSTOM_COURSE_COLOR') :
    custom_color = configuration_helpers.get_value('TMA_CUSTOM_COURSE_COLOR')[str(course.id)]
  else:
    custom_color = str(configuration_helpers.get_value('primary_color'))
  endif
else:
  custom_color = str(configuration_helpers.get_value('primary_color'))
endif
if configuration_helpers.get_value('third_color'):
  third_color = str(configuration_helpers.get_value('third_color'))
else:
  third_color = "#fff"
endif
if configuration_helpers.get_value('dark_theme'):
  color_custom = "#fff"
else:
  color_custom = "#3c3c3c"
%>

<link rel="stylesheet" type="text/css" href="${css}" />
<style>
body footer.global {
    background-color: ${third_color}!important;
}
</style>

<footer class="global">
  <div class="footer-container">
    <ul class="links">
      <li>
        <a href="/tos">Conditions générales</a>
      </li>
      <li>
        <a href="${marketing_link('FAQ')}">FAQ</a>
      </li>
    </ul>
    <p class="copyright">Une r&eacute;alisation <a href="http://themoocagency.com">The MOOC Agency</a></p>
    <div class="by-ionisx">
	<!--modif on text and image-->
      <!--
      <a href="/">
        <img src="" alt="">
      </a>
      -->
    </div>
  </div>
</footer>


<script>


// CA - 28/04/2023 - FR Translation for drag and drop problem
var textTranslation = setInterval(function() {

  var lang = "${LANGUAGE_CODE}"
  if (lang == 'fr') {

    // Drag n drop attempts infos
    var targetedDiv = document.getElementsByClassName('submission-feedback')
    for (let i = 0; i < targetedDiv.length; i++) {
      const element = targetedDiv[i];
      var targetedText = element.innerHTML 
      if (targetedText.indexOf('essais') != -1 ) {
        element.innerHTML = element.innerHTML.replace('essais', 'essai')      
      }
    }

    // Drag n drop buttons
    var dragNDropDiv = document.getElementsByClassName('xblock--drag-and-drop')  
    for (let i = 0; i < dragNDropDiv.length; i++) {
      const element = dragNDropDiv[i];

      if (element.getElementsByClassName('submit-answer-button')) { 
        var dragNDropSubmit = element.getElementsByClassName('submit-answer-button')
        dragNDropSubmit[0].innerText = "Soumettre"
      }

      if (element.getElementsByClassName('attempts-used').length > 0) {
        var dragNDropAttempt = element.getElementsByClassName('attempts-used')
        var correctedText = dragNDropAttempt[0].innerText
        correctedText = correctedText.replace('You have used','Vous avez utilisé')
        correctedText = correctedText.replace('of','essai(s) sur')
        correctedText = correctedText.replace('attempts','')
        dragNDropAttempt[0].innerText = correctedText
      }

      if (element.getElementsByClassName('reset-button').length > 0) {
        var dragNDropReset = element.getElementsByClassName('reset-button')
        dragNDropReset[0].innerHTML = '<span class="btn-icon fa fa-refresh" aria-hidden="true"></span>Recommencer'
      }

      if (element.getElementsByClassName('show-answer-button').length > 0) { 
        var dragNDropAnswer = element.getElementsByClassName('show-answer-button')
        dragNDropAnswer[0].innerHTML = '<span class="btn-icon fa fa-info-circle" aria-hidden="true"></span>Voir la réponse'
      }

    }

    // FEEDBACK
    var feedBackContent = document.getElementsByClassName('feedback-content')
    if (feedBackContent.length > 0) {

      for (let i = 0; i < feedBackContent.length; i++) {

        const element = feedBackContent[i];
        phrases = element.querySelectorAll('.message')
        phrases.forEach(function(phrase) {
          phrase.innerText = phrase.innerText.replace('Misplaced item was returned to item bank.', 'Cet élément a été replacé dans la zone initiale.')          
          phrase.innerText = phrase.innerText.replace('Misplaced items were returned to item bank.', 'Ces éléments ont été replacé dans la zone initiale.')          
          phrase.innerText = phrase.innerText.replace('Did not place', 'Il manque')
          phrase.innerText = phrase.innerText.replace('Final attempt was used', 'Dernier essai utilisé')
          phrase.innerText = phrase.innerText.replace('highest score is', 'meilleur score')
          phrase.innerText = phrase.innerText.replace('required', '')
          phrase.innerText = phrase.innerText.replace('Correctly placed', 'Correctement placé')
          phrase.innerText = phrase.innerText.replace('Misplaced', 'Mal placé :')
          phrase.innerText = phrase.innerText.replace('item', 'élément')
          phrase.innerText = phrase.innerText.replace('items', 'éléments')
          phrase.innerText = phrase.innerText.replace('Your', 'Votre')
        })
      }
    } 
  }

}, 500)

</script>
