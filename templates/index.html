<%page expression_filter="h"/>
<%inherit file="main.html" />
<%namespace name='static' file='static_content.html'/>
<%!
from django.utils.translation import ugettext as _
from django.core.urlresolvers import reverse

from openedx.core.djangolib.markup import HTML, Text
%>
<%
register_course_id = static.get_value('course_id')
org = static.get_value('domain_prefix')
css = '/media/microsite/{}/auto/css/index.css'.format(org)
%>
<link rel="stylesheet" type="text/css" href="${static.url(css)}" />
<link
  rel="stylesheet"
  href="https://unpkg.com/swiper/swiper-bundle.min.css"
/>
<style>
  #global-navigation {
    position: fixed;
    top: 0px;
  }
  #main>section>header>#homepage_banner{
    margin-top: 40vh;
    background: #00000099;
    padding: 25px;
  }
  #main>section>header>#homepage_banner>h1{
    font-weight: 900;
    color: white;
    font-size: 2.6rem;
  }
  #main>section>header>#homepage_banner>ol{
    list-style: none;
  }
  #main>section>header>#homepage_banner>ol>li>a{
    padding: 6px 12px 6px 12px;
    text-decoration: none;
  }
  #main>section>header>#homepage_banner>ol>li>a:hover{
    color: black!important;
    background-color: transparent!important;
  }
  #tma_background_font {
    /* background-image: url(/media/microsite/e-formation-artisanat/auto/images/bg_img.jpg) !important; */
    background-color: #EDEEEF;
    background-position: center;
  }
  .modal.home-page-video-modal .inner-wrapper, .home-page-video-modal.leanModal_box .inner-wrapper {
    z-index: 0;
  }
  .home {
    background: none;
  }
  .home>header {
    background: inherit !important;
    height: 770px;
    box-shadow: none;
    text-align: center;
  }
  .video-modal {
    display: block;
    position: static;
    margin: auto;
    color: black;
  }
  .home .highlighted-courses{
    position :inherit!important;
  }
  .courses-container {
    background-color: white;
    padding-left: 25px;
    padding-right: 25px;
    margin: 0px!important;
    max-width: 100% !important;
  }
  .video-wrapper{
    display: flex;
    justify-content: center;
  }
  #videoHeader, .swiper{
    position: fixed;
    right: 0;
    left: 0;
    bottom: 0;
    min-width: 100%;
    min-height: 100%;
    height: 100vh;
    overflow: hidden;
    background-size: cover;
    object-fit: cover;
    z-index: -1;
  }
  .courses-container {
    margin-bottom: 0px !important;
  }
  .courses-container {
    background-color: #dedede !important;
  }
  .home .highlighted-courses {
    display: flex;
  }
  .courses-container .courses {
    width: 80%;
    margin: auto;
  }

  /* SWIPER */
  .swiper {
        width: 100%;
        height: 100%;
      }

      .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #fff;

        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      }

      .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
  /* SWIPER END */
  @media screen and (max-width: 780px) {
    #main>section>header>#homepage_banner>h1{
      font-size: 1.6rem;
    }
  }
  @media screen and (max-width: 680px) {
    .promo-video {
      width: 320px;
      height: 180px;
    }
    .modal.home-page-video-modal .inner-wrapper, .home-page-video-modal.leanModal_box .inner-wrapper {
      width: 320px;
      height: 180px;
    }
    .modal.home-page-video-modal, .home-page-video-modal.leanModal_box {
      width: 342px;
    }
  }
</style>
<main id="main" aria-label="Content" tabindex="-1">
    <section class="home">
      <header>
        <div id="homepage_banner">
          <h1>Développez vos compétences avec<br />les chambres de métiers et de l’artisanat</h1>
          <ol class="right nav-courseware list-inline">
            <li class="item nav-global-04">
              <a class="btn btn-login" href="/register">${_("Register")}</a>
              <a class="btn btn-login" href="/login">${_("Sign in")}</a>
            </li>
          </ol>
        </div>
        <!-- <video id="videoHeader" autoplay="true" loop="true" preload="metadata" muted="muted">
          <source src="/media/microsite/e-formation-artisanat/assets/video.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video> -->
        <!-- Swiper -->
        <div class="swiper mySwiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide"><img src="/media/microsite/management-artisanat/assets/cooking.jpg" alt="formation cuisine"></div>
            <div class="swiper-slide"><img src="/media/microsite/management-artisanat/assets/asian.jpg" alt="formation cuisine"></div>
            <div class="swiper-slide"><img src="/media/microsite/management-artisanat/assets/construction.jpg" alt="formation cuisine"></div>
            <div class="swiper-slide"><img src="/media/microsite/management-artisanat/assets/cma_paca.jpg" alt="formation cuisine"></div>
          </div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
          <div class="swiper-pagination"></div>
        </div>
      </header>

      <%include file="${courses_list}" />

    </section>
</main>
<!-- Swiper JS -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>
  var swiper = new Swiper(".mySwiper", {
    spaceBetween: 30,
    loop: true,
    centeredSlides: true,
    autoplay: {
      delay: 5000,
      disableOnInteraction: false,
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    // navigation: {
    //   nextEl: ".swiper-button-next",
    //   prevEl: ".swiper-button-prev",
    // },
  });
</script>

% if show_signup_immediately is not UNDEFINED:
  ## NOTE: This won't work in production, because anonymous views are cached, so it will
  ## show either with or without this extra js for 3 minutes at a time.
<script type="text/javascript">
  $(window).load(function() {$('#signup_action').trigger("click");});
</script>
% endif

% if register_course_id is not None:
<script>
$(".btn-neutral").each(function(){
 $(this).attr('href','/register?course_id=${register_course_id}&enrollment_action=enroll');
});
$(".btn-login").each(function(){
 $(this).attr('href','login?next=%2Faccount%2Ffinish_auth%3F${register_course_id}%26enrollment_action%3Denroll%26next%3D%252Fdashboard');
});

</script>
% endif
