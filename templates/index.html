<!DOCTYPE html> 
<html>
   <html>
      <head>
     <meta charset='utf-8'>
         <meta name='viewport' content='width=device-width, initial-scale=1.0'>
         <title id='masterTitle'></title>
		 	<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>
      </head>
      <body style="display: none">
         <nav id = "nav"class="navbar navbar-default">
            <div class="container-fluid">
               <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                     <ul class="nav navbar-nav navbar-right">
                        <li><a href="" id="loginLink1">Connexion</a></li>
                        <li><a href="" id="howRegisterLink1" onclick="goToWhatIsMooc()">Comment s'inscrire ?</a></li>
                     </ul>
                  </button>
               </div>
               <div id="navbar" class="navbar-collapse collapse">
                  <ul class="nav navbar-nav">
                     <li><a class="navbar-brand "><img class="logoNav">                   
                        </a>
                     </li>
                  </ul>
                  <ul class="nav navbar-nav navbar-right">
                     <li><a href="" id="loginLink2" class="cx">Connexion</a></li>
                     <li><a href="/faq" id="FAQLink" class="rg">FAQ</a></li>
                     <li><a href="/honor" id="contactLink" class="rg">Contact</a></li>
                  </ul>
               </div>           
            </div>       
         </nav>
         <section id="se1" style="">
            <div class="row vertical-center">
               <div class="col-md-12 text-center">
                  <div class="container-fluid" id="containerTitleBand">
                     <div id="titleBand">
                        <h1 id="mainTitle1"></h1>
                        <h1 pre id="mainTitle2"></h1>
                        <h1 id="mainTitle3" style="display: none"></h1>
                     </div>
                     <div class="col">                  
                        <button class="btn btn-default butn jbo rg howRegisterJumbo" onclick="goToWhatIsMooc()" id="subscribeButn">Comment s'inscrire ?</button>
                        <button class="btn btn-default butn jbo cx connexJumbo" href="" id="loginButn">connexion</button>         
                     </div>
                  </div>
               </div>
            </div>
         </section>
         <section id="se2">
            <h2 class="text-center sectionTitle"></h2>
            <h2 class="surligner">___________________</h2>
            <div class="row row-eq-height">
               <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 colvid" style="padding-left: 4%">
                  <div class="embed-responsive embed-responsive-4by3">
                     <video 
                     id="videoSr" 
                     type="video/mp4"
                     class="embed-responsive-item" 
                     width="550"
                     controls="true" 
                     allow="fullscreen" 
                     allowfullscreen
                     poster="/media/microsite/formation-cqp-branchedechet/pagebuilder/assets/img/video_vignette.jpg"
                     src="">
                        <img src="/media/microsite/formation-cqp-branchedechet/pagebuilder/assets/img/video_vignette.jpg" alt="Votre navigateur ne supporte pas cette vidéo">
                     </video>
                  </div>
               </div>
               <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 colvidtext tableT" >
                  <div class="tableChild">
                     <p id="vvText1">This is some text.</p>
                     <p id="vvText2">This is some text.</p>
                     <p id="vvText3">This is some text.</p>
                     <p id="vvText4">This is some text.</p>
                  </div>
               </div>
            </div>
         </section>
         <section id="se3">
            <h2 class="text-center sectionTitle"></h2>
            <h2 class="surligner">___________________</h2>
            <div class="row row-eq-height">
               <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 colvidtext tableT" >
                  <div class="tableChild">
                     <p class="text1">This is some text.</p>
                     <p class="text2">This is some text.</p>
                     <p class="text3">This is some text.</p>
                  </div>
               </div>
               <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 colvid" style="padding-left: 4%">
                  <div class="">
                     <img class='img-rounded moocIco' src="">
                  </div>
               </div>
            </div>
         </section>
         <footer id="footer">
            <div class="row footerBottom">
               <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 " >
                  <p class="text-center underW" >Site deployé par The MOOC Agency - 2020 </p>
               </div>
            </div>
            </div>          
         </footer>
         <script>
            var openDiscoverCPQ = function (){
               // window.open("/media/microsite/formation-cqp-branchedechet/pagebuilder/assets/img/questionnaire-G8.pdf", '_blank');
            }

            var goToWhatIsMooc = function scroll_to(div){
               $('html, body').animate({
                  scrollTop: $("#se3").offset().top
               },1000);
            }

				 var envDefault = "developement"
					 var organisation = "formation-cqp-branchedechet"
					 	var urlCompose
					 var i 
                     var iter
                     var tbTitle
                     var tbText
                     var pathRegister = "/register"
                     var pathLogin = "/login"
                     var course_id = "course-v1:formation-cqp-branchedechet+OO-01+2020"
                     var enrollment_action = "enroll"
                     var connectLink = "?course_id=" + course_id + "&enrollment_action=" + enrollment_action
                     var pathMedia = "media/microsite/"
                     var micrositeName 
                     var folderPb = "/pagebuilder"
                     var imgSrc = "/assets/img/"
                     var thumbnailStr = "thumbnailStr"
                     var contentImg = "contentImg"
                     var thumbnailObj
                     var thumbnailObjObj
                     var composeurUrlSrc = pathMedia + micrositeName + folderPb + imgSrc +thumbnailStr
                     var composeurUrlSrc2 = pathMedia + micrositeName + folderPb + imgSrc +contentImg
                     var termPng = ".png"
                     var termJpg = ".jpg"
                     var vNone = 'none'
                     var thumbnailMOOC =  "<div class='col-md-3 col-sm-6 item col-xs-12'><div class='box'><h3 class='name' >"+tbTitle+"</h3> <p class='description' >"+tbText+"</p></div> </div>"
                     
                     
                     var thumbnailImgSrc
                     var titleThumbnail
                     var titleWeeks
                     var iconoImgSrc
                     
                     var thumbnailChap =  "<div class='col-md-4 thumbnailImg'> <div class='thumbnail'><div class='caption'> <h3 >"+titleThumbnail+"</h3><p class='weekSp'>"+titleWeeks+"</p><p class='under_s2'></p></div> </div></div>"
            
                     var titleThumb
                     var imgThumbSrcIcon
                     var imgThumbSrc
                     var pWeeksTitle
                     var pWeeksContent
                     var moduleDetails
            
                     var thumbnailChapEsc =  "<div class='col-md-4 noflex'><div class='thumbnail'> <div class='caption'> <h3 class='h3Thumb'  " + titleThumb + "</h3><p class='pWeeksTitle'>"+pWeeksTitle+"</p> <p class='pWeeksContent'>"+pWeeksContent+"</p></div>  </div>  </div>"
            
                        var swapDisplay = function(elm){
                              var elmt = elm
                              elmt.style.display = 'none'
                        }
            
            var getInfo= function(){
					 micrositeName  = organisation
					 if (envDefault=='developement'){pathMedia =  "media/microsite/"}
					 else{pathMedia =  "/media/microsite/"}
					 composeurUrlSrc = pathMedia + micrositeName + folderPb + imgSrc +thumbnailStr
                    composeurUrlSrc2 = pathMedia + micrositeName + folderPb + imgSrc +contentImg
					urlCompose =pathMedia + micrositeName + "/pagebuilder/json/info.json"
            }
			
            var scriptLinkGenerator =  function(){
   
               var scriptSrcArr = ["bootstrap.min.js","jquery.scrollify.js"]
               var script = document.createElement('script');
               var script2 = document.createElement('script');
               var mainPathB= pathMedia + micrositeName + folderPb + "/assets//bootstrap/js/"
               script.id = 'Sid1';
               script.src = mainPathB+scriptSrcArr[0];
               script2.id = 'Sid2';
               script2.src = mainPathB+scriptSrcArr[1];
               document.head.appendChild(script);
               document.head.appendChild(script2);
         
               var lsSrcArr = ["/pagebuilder/assets/bootstrap/css/bootstrap-theme.min.css","/pagebuilder/assets/bootstrap/css/bootstrap.min.css","/pagebuilder/css/style.css"]
               var link1 = document.createElement('link');
               link1.id = 'id1';
               link1.rel = 'stylesheet';
               link1.href = pathMedia+ micrositeName + lsSrcArr[0];
               var link2 = document.createElement('link');
               link2.id = 'id2';
               link2.rel = 'stylesheet';
               link2.href = pathMedia+ micrositeName + lsSrcArr[1];
               var link3 = document.createElement('link');
               link3.id = 'id3';
               link3.rel = 'stylesheet';
               link3.href = pathMedia+ micrositeName + lsSrcArr[2];
               document.head.appendChild(link1);
               document.head.appendChild(link2);
               document.head.appendChild(link3);
               
               $("#loginLink1").attr("href",pathLogin + connectLink)
               $("#loginLink2").attr("href",pathLogin + connectLink)
               $("#loginButn").click(function(){window.location.href = pathLogin + connectLink})
            }
               
            var bindindFunctionA = function(){
               iter =  objJson.container.section3.nrbThumbnail
               for (i = 0; i < iter ; i++ ){
                  thumbnailObj = objJson.container.section3.thumbnail[i]
                  // <!-- thumbnailObj= JSON.parse(thumbnailObj) -->
                  tbTitle = thumbnailObj.title
                  tbText = thumbnailObj.text
                  thumbnailMOOC =  "<div class='col-md-3 col-sm-6 item col-xs-12'><div class='box'><img class='img-rounded moocIco' src="+composeurUrlSrc+i+termPng+"><h3 class='name' >"+tbTitle+"</h3> <p class='description' >"+tbText+"</p></div> </div>";
                  $('#markMoock').append(thumbnailMOOC)
               
               }
            }
                  
            var bindindFunctionFooter = function(){
               var footerTitleContent = objJson.container.section4.footer
               var footerTitleContentTitle = objJson.container.section4.footer.title
               $('#footerTitle').text(footerTitleContentTitle)  
            }
                  
            var bindindFunctionMainSection= function(){
               var mainTitleContent = objJson.container.section1.title
               var mainTitleContentTitle = objJson.container.section1.title.title1
               var mainTitleContentTitle2 = objJson.container.section1.title.title2
               var mainTitleContentTitle3 = objJson.container.section1.title.title3
               $('#mainTitle1').text(mainTitleContentTitle)
               $('#mainTitle2').html(mainTitleContentTitle2)
               //  $('#mainTitle3').text(mainTitleContentTitle3)     
            }
                     
            var bindindFunctionMainSectionVideo = function(){
               var mainTitleContent = objJson.container.section2
               var mainTitleContentTitle = objJson.container.section2.title
               var mainTitleContentText1 = objJson.container.section2.textLeft1
               var mainTitleContentText2 = objJson.container.section2.textLeft2
               var mainTitleContentText3 = objJson.container.section2.textLeft3
               var mainTitleContentText4 = objJson.container.section2.textLeft4
               var srcV = objJson.container.section2.videoSrc
               // var srcV = pathMedia + micrositeName + folderPb + imgSrc + objJson.container.section2.videoSrc
               $('#vvTitle').text(mainTitleContentTitle)
               $('#videoSr').attr("src",srcV)
               $('#vvText1').html(mainTitleContentText1)
               $('#vvText2').html(mainTitleContentText2)
               $('#vvText3').html(mainTitleContentText3)
               $('#vvText4').html(mainTitleContentText4)
            }
                         
            var bindindFunctionMainSectionIntro= function(){
            	var mainTitleContent = objJson.container.section1.phraseIntroButtonUp
            	$('#introConnect').text(mainTitleContent)         
            }
                     
            var bindindFunctionMainSectionVIdeoTitle= function(){
            	var mainTitleContent = objJson.container.section2.title
            	$('#se2').find(".sectionTitle").text(mainTitleContent)         
            }
                     
            var bindindFunctionSection3= function(){
            	var mainTitleContent = objJson.container.section3.title
               var text1 = objJson.container.section3.textLeft1
               var text2 = objJson.container.section3.textLeft2
               var text3 = objJson.container.section3.textLeft3
               var imgSrc = pathMedia + micrositeName + objJson.container.section3.imgSrc
               $('#se3').find(".sectionTitle").text(mainTitleContent)
               $('#se3').find("img").attr("src",imgSrc)
               $('#se3').find(".text1").html(text1)
               $('#se3').find(".text2").html(text2)
               $('#se3').find(".text3").html(text3)
            }
            
            var bindindFunctionMeta = function(){
            	var mainTitleContent = objJson.page.title
            	$("#masterTitle").text(mainTitleContent)
            }
            
            var masterBind= function(){
				
				scriptLinkGenerator();
            	bindindFunctionA();
            	bindindFunctionFooter();
            	bindindFunctionMainSection();
            	bindindFunctionMainSectionVIdeoTitle();
            	bindindFunctionMainSectionIntro();
            	bindindFunctionSection3();
            	bindindFunctionMainSectionVideo();
               bindindFunctionMeta ();
               $(document).ready(function(){
                  $("body").css({"display":"inherit"})
               })
             }
            
            var objJson
            
            getInfo();
            var a = new XMLHttpRequest();

            a.open("GET",urlCompose,true);
            a.onreadystatechange = function() {
              if( this.readyState == 4) {
            	if( this.status == 200) {
            	  objJson= JSON.parse(this.response)
            	  masterBind();
            	}
            	else alert("HTTP error "+this.status+" "+this.statusText);
              }
            }
            a.send();
            // a.addEventListener('loadend', $("body").css({"display":"inherit"}));
            
            $(".scroll").click(function() {
            	$('html, body').animate({
            		scrollTop: $("#se2").offset().top
            	}, 2000);
            });
			</script>       
      </body>
   </html>

