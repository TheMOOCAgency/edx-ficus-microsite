<%page expression_filter="h"/>
<%inherit file="main.html" />
<%namespace name='static' file='static_content.html'/>
<%!
from django.utils.translation import ugettext as _
from django.core.urlresolvers import reverse

from openedx.core.djangolib.markup import HTML, Text
%>
<%
register_course_id = static.get_value('course_id')
org = static.get_value('domain_prefix')
css = '/media/microsite/{}/auto/css/index.css'.format(org)
%>
<link rel="stylesheet" type="text/css" href="${static.url(css)}" />
<style>
.header-information {
  margin: 130px;
}
.header-information-title {
  color: white !important;
  text-transform: uppercase;
  font-weight: bold;
  font-size: 2rem;
}
.header-information-text {
  color: white !important;
  padding: 15px;
  text-align: justify;
  line-height: 1.4;
}
.header-button {
  color: white;
  background-color: rgba(28,72,143);
  padding: 10px;
  margin: 50px auto;  
  width: 200px;
  text-align: center;
  font-weight: bold;
  font-size: 1.2rem;
}

* {box-sizing:border-box}

/* Slideshow container */
.slideshow-container {
  max-width: 1000px;
  position: relative;
  margin: auto;
  margin-top: 35px;
}

/* Make the images invisible by default */
.Containers {
  display: none;
}

/* forward & Back buttons */
.Back, .forward {
  cursor: pointer;
  position: absolute;
  top: 48%;
  width: auto;
  margin-top: -23px;
  padding: 17px;
  color: grey;
  font-weight: bold;
  font-size: 19px;
  transition: 0.4s ease;
  border-radius: 0 5px 5px 0;
  user-select: none;
}

/* Place the "forward button" to the right */
.forward {
  right: 0;
  border-radius: 4px 0 0 4px;
}

/*when the user hovers,add a black background with some little opacity */
.Back:hover, .forward:hover {
  background-color: rgba(0,0,0,0.8);
}

/* Caption Info */
.Info {
  color: #e3e3e3;
  font-size: 16px;
  padding: 10px 14px;
  position: absolute;
  bottom: 10px;
  width: 100%;
  text-align: center;
}

/* Worknumbering (1/3 etc) */
.MessageInfo {
  color: #f2f2f3;
  font-size: 14px;
  padding: 10px 14px;
  position: absolute;
  top: 0;
}

/* The circles or bullets and indicators */
.dots {
  cursor: pointer;
  height: 16px;
  width: 16px;
  margin: 0 3px;
  background-color: #acc;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.5s ease;
}

.enable, .dots:hover {
  background-color: #717161;
}

/* Faint animation */
.fade {
  -webkit-animation-name: fade;
  -webkit-animation-duration: 1.4s;
  animation-name: fade;
  animation-duration: 1.4s;
}

@-webkit-keyframes fade {
  from {opacity: .5}
  to {opacity: 2}
}

@keyframes fade {
  from {opacity: .5}
  to {opacity: 2}
}
</style>
<main id="main" aria-label="Content" tabindex="-1">
    <section class="home">
      <header>
        <div class="outer-wrapper">
          <div class="title">
            <div class="heading-group">
              % if homepage_overlay_html:
                ${homepage_overlay_html | n, decode.utf8}
              % else:
                  ## Translators: 'Open edX' is a registered trademark, please keep this untranslated. See http://open.edx.org for more information.
                  <h1>${Text(_(u"Welcome to the Open edX{registered_trademark} platform!")).format(registered_trademark=HTML("<sup style='font-size: 65%'>&reg;</sup>"))}</h1>
                  ## Translators: 'Open edX' is a registered trademark, please keep this untranslated. See http://open.edx.org for more information.
                  <p>${_("It works! This is the default homepage for this Open edX instance.")}</p>
              % endif
            </div>
            % if settings.FEATURES.get('ENABLE_COURSE_DISCOVERY'):
              <div class="course-search">
                <form method="get" action="/courses">
                  <label><span class="sr">${_("Search for a course")}</span>
                    <input class="search-input" name="search_query" type="text" placeholder="${_("Search for a course")}"></input>
                  </label>
                  <button class="search-button" type="submit">
                    <span class="icon fa fa-search" aria-hidden="true"></span><span class="sr">${_("Search")}</span>
                  </button>
                </form>
              </div>
            % endif

          </div>

          % if show_homepage_promo_video:
            <a href="#video-modal" class="media" rel="leanModal">
              <div class="hero">
                <div class="play-intro"></div>
              </div>
            </a>
          % endif
        </div>

        <div class="header-information">
          <h2 class="header-information-title">Un nouveau module est disponible !</h2>
          <p class="header-information-text">
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Beatae aliquam, est similique eius labore praesentium quo voluptatum impedit dolore minima alias recusandae sunt sit sed neque, illum voluptas! Rerum, dolores.
            Tenetur odit maiores voluptatum nulla dolor architecto laudantium eaque impedit? Voluptate optio est corporis eaque sunt exercitationem ipsam facere nisi aspernatur temporibus ipsa, laboriosam sit! Architecto eveniet nemo neque voluptatem?
            Animi debitis impedit ipsam aut perferendis, facilis soluta at magni, facere iste tenetur asperiores aspernatur nulla quas unde ullam maiores alias corporis, rem modi nemo. Veritatis et recusandae error provident.
          </p>

          <div class="header-button" >
            En savoir plus
          </div>

        </div>

      </header>
      
      <div class="slideshow-container fade">

      <!-- Full images with numbers and message Info -->

        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image1.jpg" style="width:100%">
        </div>
        
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image2.jpg" style="width:100%">
        </div>
        
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image3.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image4.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image5.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image6.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image7.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image8.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image9.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image10.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image11.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image12.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image13.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image14.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image15.jpg" style="width:100%">
        </div>
          
        <div class="Containers">
          <img src="/media/microsite/adpep66/slideshow_images/image16.jpg" style="width:100%">
        </div>
        
        <!-- Back and forward buttons -->
        <a class="Back" onclick="plusSlides(-1)">&#10094;</a>
        <a class="forward" onclick="plusSlides(1)">&#10095;</a>
      </div>
      <br>

      <!-- The circles/dots -->
      <div style="text-align:center">
        <span class="dots" onclick="currentSlide(1)"></span>
        <span class="dots" onclick="currentSlide(2)"></span>
        <span class="dots" onclick="currentSlide(3)"></span>
        <span class="dots" onclick="currentSlide(4)"></span>
        <span class="dots" onclick="currentSlide(5)"></span>
        <span class="dots" onclick="currentSlide(6)"></span>
        <span class="dots" onclick="currentSlide(7)"></span>
        <span class="dots" onclick="currentSlide(8)"></span>
        <span class="dots" onclick="currentSlide(9)"></span>
        <span class="dots" onclick="currentSlide(10)"></span>
        <span class="dots" onclick="currentSlide(11)"></span>
        <span class="dots" onclick="currentSlide(12)"></span>
        <span class="dots" onclick="currentSlide(13)"></span>
        <span class="dots" onclick="currentSlide(14)"></span>
        <span class="dots" onclick="currentSlide(15)"></span>
        <span class="dots" onclick="currentSlide(16)"></span>
      </div> 

      <%include file="${courses_list}" />

    </section>
</main>

% if show_homepage_promo_video:
  <section id="video-modal" class="modal home-page-video-modal video-modal">
    <div class="inner-wrapper">
      <iframe title="YouTube Video" width="640" height="360" src="//www.youtube.com/embed/${homepage_promo_video_youtube_id}?showinfo=0" frameborder="0" allowfullscreen></iframe>
    </div>
  </section>
% endif

<%block name="js_extra">
   <script type="text/javascript">
      $(window).load(function() {
         if(getParameterByName('next')) {
              $('#login').trigger("click");
         }
      })
   </script>
</%block>

% if show_signup_immediately is not UNDEFINED:
  ## NOTE: This won't work in production, because anonymous views are cached, so it will
  ## show either with or without this extra js for 3 minutes at a time.
<script type="text/javascript">
  $(window).load(function() {$('#signup_action').trigger("click");});
</script>
% endif

% if register_course_id is not None:
<script>
$(".btn-neutral").each(function(){
 $(this).attr('href','/register?course_id=${register_course_id}&enrollment_action=enroll');
});
$(".btn-login").each(function(){
 $(this).attr('href','login?next=%2Faccount%2Ffinish_auth%3F${register_course_id}%26enrollment_action%3Denroll%26next%3D%252Fdashboard');
});

</script>
% endif

<!-- SLIDESHOW -->
<!-- SLIDESHOW -->
<script>
  // forward/Back controls
function plusSlides(n) {
  SlideShow(slidePosition += n);
}

//  images controls
function currentSlide(n) {
  SlideShow(slidePosition = n);
}

function SlideShow(n) {
  var i;
  var slides = document.getElementsByClassName("Containers");
  var circles = document.getElementsByClassName("dots");
  if (n > slides.length) {slidePosition = 1}
  if (n < 1) {slidePosition = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
  }
  for (i = 0; i < circles.length; i++) {
      circles[i].className = circles[i].className.replace(" enable", "");
  }
  slides[slidePosition-1].style.display = "block";
  
  console.log("test");
  console.log(slidePosition);
  console.log(n);
  console.log(slides);

  circles[slidePosition-1].className += " enable";
} 
var slidePosition = 1;
SlideShow(slidePosition);


</script>