## mako
<%namespace name='static' file='static_content.html'/>
<%!
from django.core.urlresolvers import reverse
from django.utils.translation import ugettext as _
%>
<!DOCTYPE html> 
<html>
      <head>
     <meta charset='utf-8'>
         <meta name='viewport' content='width=device-width, initial-scale=1.0'>
         <title id='masterTitle'></title>
         <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>
         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Open Sans&display=swap" rel="stylesheet">
        <script src="https://unpkg.com/scrollreveal@4.0.0/dist/scrollreveal.min.js"></script>
      </head>
      <body style="display: none">
         <nav id = "nav"class="navbar navbar-default">
            <div class="container-fluid">
                  <ul id="logo-container" class="nav navbar-nav m-auto reveal">
                     <li>
                        <a class="navbar-brand "><img id="logoMicrosite" src="media/microsite/myjugaad/pagebuilder/assets/img/logo.png"></img></a>
                     </li>
                  </ul>
            </div>
            <div class="row vertical-center" id="nav_container_butns">
               <div class="col-md-12 text-center" style="position:absolute;top:30px;">
                  <div class="container-fluid" id="containerTitleBand">
                     <div class="col text-center">              
                        <button class="btn btn-default butn jbo rg registerJumbo" href="" id="subscribeButn"> inscription </button>
                        <button class="btn btn-default butn jbo cx connexJumbo" href="" id="loginButn">connexion</button>  
                     </div>
                  </div>
               </div>
            </div> 
         </nav>

         <section id="se1">
            <div id="titleBand">
              <h1 id="mainTitle1"></h1>
              <div id="titleSeparator"></div>
              <div class="col text-center">              
                 <button class="btn btn-default butn jbo rg registerJumbo" href="" id="subscribeButn2"> inscription </button>
                 <button class="btn btn-default butn jbo cx connexJumbo" href="" id="loginButn2">connexion</button>  
              </div>
            </div>
         </section>

         <div class='separatorContainer'>
            <h2 class="surligner inline"></h2>
         </div>

         <section id="se2">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad4 " >
               <h2 class="sectionTitle"></h2>
               <div class="reveal">
                  <div class="module module_1 m-auto"><div class="module_title"></div><div class="module_text"></div></div>
                  <div class="module module_2 m-auto"><div class="module_title"></div><div class="module_text"></div></div>
                  <div class="module module_3 m-auto"><div class="module_title"></div><div class="module_text"></div></div>
                  <div class="module module_4 m-auto"><div class="module_title"></div><div class="module_text"></div></div>
               </div>
            </div>
         </section>

         <div class='separatorContainer'>
            <h2 class="surligner inline"></h2>
         </div>

         <section id="se3">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad4 " >
               <h2 class="sectionTitle"></h2>
               <div id="markMoock"></div>
            </div>
         </section>

         <div class='separatorContainer'>
            <h2 class="surligner inline"></h2>
         </div>

         <footer id="footer">
            <div class="row" style="display: block">
               <div class="col text-center">
                  <button class="btn btn-default butn" id="subscribeButn3">
                  JE Mâ€™INSCRIS !</button> 
               </div>
            </div>
            <div class="row footerBottom">
               <div id="footerIcons" class="reveal">
                  <!-- <img class="footerIcons" src='media/microsite/myjugaad/pagebuilder/assets/img/logo-myjugaad.png'></img>
                  <img class="footerIcons" src='media/microsite/myjugaad/pagebuilder/assets/img/logo-caisse-depot.png'></img>
                  <img class="footerIcons" src='media/microsite/myjugaad/pagebuilder/assets/img/Logo-investir-lavenir.png'></img>
                  <img class="footerIcons onRight" src='media/microsite/myjugaad/pagebuilder/assets/img/logo_TMA.png'></img> -->
               </div>
            </div>
            </div>          
         </footer>
         <script>   
       
				 var envDefault = "developement"
					 var organisation = "myjugaad"
					 	var urlCompose
					 var i 
                     var iter
                     var tbTitle
                     var tbText
                     var pathRegister = "/register"
                     var pathLogin = "/login"
                     var course_id = "course-v1:myjugaad+aad20+2020"
                     var enrollment_action = ""
                     var connectLink = ""
                     var pathMedia = "media/microsite/"
                     var micrositeName 
                     var folderPb = "/pagebuilder"
                     var imgSrc = "/assets/img/"
                     var thumbnailStr = "thumbnailStr"
                     var contentImg = "contentImg"
                     var thumbnailObj
                     var thumbnailObjObj
                     var composeurUrlSrc = pathMedia + micrositeName + folderPb + imgSrc +thumbnailStr
                     var composeurUrlSrc2 = pathMedia + micrositeName + folderPb + imgSrc +contentImg
                     var termPng = ".png"
                     var termJpg = ".jpg"
                     var vNone = 'none'
                     var thumbnailMOOC =  "<div class='col-md-3 col-sm-6 item col-xs-12'><div class='box'><img class='img-rounded' src="+composeurUrlSrc+i+termPng+"><h3 class='name' >"+tbTitle+"</h3> <p class='description' >"+tbText+"</p></div> </div>"
                     
                     
                     var thumbnailImgSrc
                     var titleThumbnail
                     var titleWeeks
                     var iconoImgSrc
                     
                     var thumbnailChap =  "<div class='col-md-4 thumbnailImg'> <div class='thumbnail'><img class='tbImg'src="+thumbnailImgSrc+"><div class='caption'> <h3 >"+titleThumbnail+"</h3><img class='tbIc' src="+iconoImgSrc+"> <p class='weekSp'>"+titleWeeks+"</p><p class='under_s2'></p></div> </div></div>"
            
                     var titleThumb
                     var imgThumbSrcIcon
                     var imgThumbSrc
                     var pWeeksTitle
                     var pWeeksContent
            
                     var thumbnailChapEsc =  "<div class='col-md-4 noflex'><div class='thumbnail'>  <img src="+imgThumbSrc+ "class='thumbMg'> <div class='caption'> <h3 class='h3Thumb'  " + titleThumb + "</h3><img src="+imgThumbSrcIcon+" class='thumbMg'><p class='pWeeksTitle'>"+pWeeksTitle+"</p> <p class='pWeeksContent'>"+pWeeksContent+"</p></div>  </div>  </div>"
            
                        var swapDisplay = function(elm){
                              var elmt = elm
                              elmt.style.display = 'none'
                        }
                     var getInfo= function(){
					 micrositeName  = organisation
					 if (envDefault=='developement'){pathMedia =  "media/microsite/"}
					 else{pathMedia =  "/media/microsite/"}
					 composeurUrlSrc = pathMedia + micrositeName + folderPb + imgSrc +thumbnailStr
                    composeurUrlSrc2 = pathMedia + micrositeName + folderPb + imgSrc +contentImg
					urlCompose =pathMedia + micrositeName + "/pagebuilder/json/info.json"
                     }
			
					var scriptLinkGenerator =  function(){
		
						var scriptSrcArr = ["bootstrap.min.js","jquery.scrollify.js"]
						var script = document.createElement('script');
						var script2 = document.createElement('script');
						var mainPathB= pathMedia + micrositeName + folderPb + "/assets//bootstrap/js/"
						script.id = 'Sid1';
						script.src = mainPathB+scriptSrcArr[0];
						script2.id = 'Sid2';
						script2.src = mainPathB+scriptSrcArr[1];
						document.head.appendChild(script);
						document.head.appendChild(script2);
				
						var lsSrcArr = ["/pagebuilder/assets/bootstrap/css/bootstrap-theme.min.css","/pagebuilder/assets/bootstrap/css/bootstrap.min.css","/pagebuilder/css/style.css"]
						var link1 = document.createElement('link');
						link1.id = 'id1';
						link1.rel = 'stylesheet';
						link1.href = pathMedia+ micrositeName + lsSrcArr[0];
						var link2 = document.createElement('link');
						link2.id = 'id2';
						link2.rel = 'stylesheet';
						link2.href = pathMedia+ micrositeName + lsSrcArr[1];
						var link3 = document.createElement('link');
						link3.id = 'id3';
						link3.rel = 'stylesheet';
						link3.href = pathMedia+ micrositeName + lsSrcArr[2];
						document.head.appendChild(link1);
						document.head.appendChild(link2);
                  document.head.appendChild(link3);
                  
                  $("#loginLink1").attr("href",pathLogin)
                  $("#registerLink1").attr("href",pathRegister + connectLink)
                  $("#loginLink2").attr("href",pathLogin)
                  $("#registerLink2").attr("href",pathRegister + connectLink)
                  $("#loginButn").click(function(){window.location.href = pathLogin + connectLink})
                  $("#loginButn2").click(function(){window.location.href = pathLogin + connectLink})
                  $("#subscribeButn").click(function(){window.location.href = pathRegister + connectLink})
                  $("#subscribeButn2").click(function(){window.location.href = pathRegister + connectLink})
                  $("#subscribeButn3").click(function(){window.location.href = pathRegister + connectLink})

                  // texts
                  $("#subscribeButn3").text(objJson.page.imIn)
                  $("#loginLink1").text(objJson.page.login)
                  $("#loginLink2").text(objJson.page.login)
                  $("#loginButn").text(objJson.page.login)
                  $("#loginButn2").text(objJson.page.login)
                  $("#registerLink1").text(objJson.page.register)
                  $("#registerLink2").text(objJson.page.register)
                  $("#subscribeButn").text(objJson.page.register)
		         }
                     
            var bindindFunctionSection1= function(){
               var mainTitleContentTitle1 = objJson.container.section1.title.title1
               $('#mainTitle1').text(mainTitleContentTitle1)
            }

            var bindindFunctionSection2= function(){
              var mainTitleContent = objJson.container.section3.title
              var module_1 = objJson.container.section2.modules[0]
              var module_2 = objJson.container.section2.modules[1]
              var module_3 = objJson.container.section2.modules[2]
              var module_4 = objJson.container.section2.modules[3]
              $('#se3').find(".sectionTitle").html(mainTitleContent)
              $('#se3 > div > div > .module_1 > .module_text').html(module_1)
              $('#se3 > div > div > .module_2 > .module_text').html(module_2)
              $('#se3 > div > div > .module_3 > .module_text').html(module_3)
              $('#se3 > div > div > .module_4 > .module_text').html(module_4)
            }

            var bindindFunctionSection3= function(){
              iter =  objJson.container.section3.thumbnail.length
            	for (i = 0; i < iter ; i++ ){
            		thumbnailObj = objJson.container.section3.thumbnail[i]
            		tbTitle = thumbnailObj.title
            		tbText = thumbnailObj.text
            		thumbnailMOOC =  "<div class='col-md-3 col-sm-6 item col-xs-12'><div class='box'><img class='img-rounded moocIco' src="+composeurUrlSrc+i+termPng+"><h3 class='name' >"+tbTitle+"</h3> <p class='description' >"+tbText+"</p></div> </div>";
            		$('#markMoock').append(thumbnailMOOC)
            	} 
              
              var mainTitleContent = objJson.container.section6.title
            	$('#se6').find(".sectionTitle").text(mainTitleContent)
            }
                     
            var bindindFunctionMeta = function(){
            	var mainTitleContent = objJson.page.title
            	$("#masterTitle").text(mainTitleContent)
            }
            
            var masterBind= function(){
				   scriptLinkGenerator(objJson);
            	bindindFunctionSection1();
               bindindFunctionSection2();
               bindindFunctionSection3();
               bindindFunctionMeta ();
            }
            
            var objJson
            
            getInfo();
            var a = new XMLHttpRequest();

            a.open("GET",urlCompose,true);
            a.onreadystatechange = function() {
              if( this.readyState == 4) {
            	if( this.status == 200) {
                var response= JSON.parse(this.response)
                objJson = response
                course_id = "course-v1:myjugaad+aad20+2020"
                enrollment_action = "enroll"
                connectLink = "?course_id=" + course_id + "&enrollment_action=" + enrollment_action
                masterBind();
            	}
            	else alert("HTTP error "+this.status+" "+this.statusText);
              }
            }
            a.send();
            a.addEventListener('loadend', $("body").css({"display":"inherit"}));
            
            $(".scroll").click(function() {
            	$('html, body').animate({
            		scrollTop: $("#se2").offset().top
            	}, 2000);
            });

            ScrollReveal().reveal('.reveal', {
                delay: 500,
                useDelay: 'onload',
                distance: '150px'
            })
          </script>
         <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
      </body>
   </html>

