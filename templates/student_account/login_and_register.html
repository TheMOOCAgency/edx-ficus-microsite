<%!
    import json
    from django.utils.translation import ugettext as _
    from openedx.core.djangolib.js_utils import dump_js_escaped_json
    from openedx.core.djangoapps.site_configuration import helpers as configuration_helpers
%>
<%namespace name='static' file='/static_content.html'/>

<%inherit file="../main.html" />

<%block name="pagetitle">${_("Sign in or Register")}</%block>

<%block name="js_extra">
    <%static:require_module module_name="js/student_account/logistration_factory" class_name="LogistrationFactory">
        var options = ${data | n, dump_js_escaped_json};
        LogistrationFactory(options);
        if ('newrelic' in window) {
            newrelic.finished();
            // Because of a New Relic bug, the finished() event doesn't show up
            // in Insights, so we have to make a new PageAction that is basically
            // the same thing. We still want newrelic.finished() for session
            // traces though.
            newrelic.addPageAction('xfinished');
        }
    </%static:require_module>
</%block>

<%block name="header_extras">
    % for template_name in ["account", "access", "form_field", "login", "register", "institution_login", "institution_register", "password_reset", "hinted_login"]:
        <script type="text/template" id="${template_name}-tpl">
            <%static:include path="student_account/${template_name}.underscore" />
        </script>
% endfor
</%block>

<div class="section-bkg-wrapper">
    <main id="main" aria-label="Content" tabindex="-1">
        <div id="login-and-registration-container" class="login-register"  />
    </main>
</div>

<script>
    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;
    
        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');
    
            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
            }
        }
    };
    

</script>


<style>
.header-global .nav-courseware li .btn{
  display:none !important;
}
</style>
% if "/login" in request.path:
<style>
#main{
  /* display:none !important; */
  background-image: none;
}
.login_container{
margin-top:30vh;
margin-left:45vw;
width: 5vw;
display: none;
}
.btn.btn-login.btn-middle-screen{
color:rgba(155,231,216,0.8) !important;
background:white !important;
font-size:24px !important;
padding: 15px 15px !important;
border: 3px solid rgba(155,231,216,0.8) !important;
}
</style>
<div class="login_container">
<button class="btn btn-login btn-middle-screen" onclick="location.replace('/auth/login/tpa-saml/?auth_entry=login&next=%2Ftma_apps%2Fuser_info&idp=bnpp_netexplo')">Connexion</a>
</div>
%endif


<script>
//console.log('test_sso_bnpp_1')
//if(getUrlParameter("admin")){
//    console.log('test_sso_bnpp_2')
//    $("#login-and-registration-container").css("visibility","visible");
//    $("#main").show();
//}else if(window.location.href.indexOf("/register") > -1){
//    console.log('test_sso_bnpp_3')
//    window.location.href = "https://bnp-paribas.netexplo.academy/tma_apps/user_info";
//}
//console.log('test_sso_bnpp_4')

</script>

